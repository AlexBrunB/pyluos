language: python

python:
    - "2.7"
    - "3.4"
    - "3.5"
    - "3.6"

before_install:
  - pip install --upgrade virtualenv
  - virtualenv --python=python venv
  - source venv/bin/activate
  - python --version
  - pip --version
  - pip install nose python-coveralls
  - pip install flake8

install:
  # install your own package into the environment
  # pip install -e rather than setup.py, so that coverage can find the source
  - pip install -e ./

script:
  - pip install -e ./[tests]
  - nosetests --with-coverage --cover-erase --cover-package=robus -v -w tests/

after_success:
    - coveralls
    - flake8 --statistics --count --config=setup.cfg robus
    - pip uninstall -y robus

after_failure:
    - pip uninstall -y robus
